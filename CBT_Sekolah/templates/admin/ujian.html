{% extends "base.html" %}
{% block content %}

<style>
    /* ==================== TABEL MODERN (SAMA PERSIS) ==================== */
    .table-modern {
        border-radius: 10px;
        overflow: hidden;
        border: 1px solid #d8e2ef !important;
    }

    .table-modern thead th {
        background: #0d6efd !important;
        color: #fff !important;
        font-weight: 600;
        border: none !important;
        padding: 14px 16px !important;
    }

    .table-modern tbody tr {
        transition: 0.15s;
    }

    .table-modern tbody tr:hover {
        background: #eef5ff !important;
    }

    .table-modern td,
    .table-modern th {
        padding: 14px 16px !important;
        vertical-align: middle !important;
    }

    .badge-modern {
        background: #0d6efd !important;
        font-size: 0.85rem;
        padding: 6px 12px;
        border-radius: 6px;
    }

    .card-custom {
        border: none;
        border-radius: 12px;
    }

    /* Responsif HP */
    @media (max-width: 576px) {
        .table-modern thead {
            font-size: 0.875rem;
        }
        .table-modern td, .table-modern th {
            padding: 10px 8px !important;
            font-size: 0.9rem;
        }
    }
</style>

<div class="container mt-4">

    <div class="d-flex justify-content-between align-items-center mb-3">
        <h2 class="fw-bold">Monitoring Seluruh Ujian</h2>
    </div>

    <div class="card shadow-sm card-custom">
        <div class="card-body">

            <h5 class="fw-semibold mb-3">Daftar Ujian</h5>

            <div class="table-responsive">
                <table class="table table-modern align-middle mb-0">
                    <thead>
                        <tr>
                            <th>Judul Ujian</th>
                            <th>Mapel & Guru</th>
                            <th>Jadwal</th>
                            <th>Status</th>
                        </tr>
                    </thead>

                    <tbody>
                        {% for u in ujian %}
                        <tr>
                            <td>
                                <strong>{{ u.judul }}</strong><br>
                                <small class="text-muted">Durasi: {{ u.durasi_menit }} menit</small>
                            </td>

                            <td>
                                <span class="fw-bold text-primary">{{ u.mapel.nama }}</span><br>
                                <small class="text-muted">
                                    <i class="bi bi-person"></i>
                                    {{ u.mapel.guru.nama if u.mapel.guru else 'Tanpa Guru' }}
                                </small>
                            </td>

                            <td>
                                <small class="fw-bold d-block">{{ u.waktu_mulai.strftime('%d %b %Y') }}</small>
                                <small>{{ u.waktu_mulai.strftime('%H:%M') }} - {{ u.waktu_selesai.strftime('%H:%M') }}</small>
                            </td>

                            <td>
                                {% if datetime.now() < u.waktu_mulai %}
                                    <span class="badge badge-modern bg-warning text-dark">Belum Mulai</span>
                                {% elif datetime.now() <= u.waktu_selesai %}
                                    <span class="badge badge-modern bg-success">Sedang Berjalan</span>
                                {% else %}
                                    <span class="badge badge-modern bg-secondary">Selesai</span>
                                {% endif %}
                            </td>
                        </tr>
                        {% else %}
                        <tr>
                            <td colspan="4" class="text-center py-4 text-muted">
                                Belum ada ujian yang dibuat.
                            </td>
                        </tr>
                        {% endfor %}

                    </tbody>
                </table>
            </div>

        </div>
    </div>

</div>

{% endblock %}
