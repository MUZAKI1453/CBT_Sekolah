{% extends "base.html" %}
{% block content %}

<!-- POSISI TENGAH LAYAR YANG PALING IDEAL -->
<div class="d-flex align-items-center justify-content-center min-vh-100 px-3"
     style="padding-top: 2vh; padding-bottom: 8vh;">

    <div class="card border-0 shadow-sm rounded-4 text-center" style="width: 340px; max-width: 95vw;">
        <div class="card-body p-4">

            <!-- LOGO CBT BULAT BIRU (SAMA DENGAN NAVBAR) -->
            <div class="mx-auto mb-4 rounded-circle d-flex align-items-center justify-content-center text-white shadow-lg"
                 style="width: 100px; height: 100px; background: #0d6efd; font-size: 42px; font-weight: 900; letter-spacing: 3px;">
                CBT
            </div>

            <h5 class="fw-bold text-dark mb-1">CBT Sekolah</h5>
            <p class="text-muted small mb-4">Sistem Ujian Berbasis Komputer</p>

            <!-- FORM MINI & RAPI -->
            <form method="POST" action="/login-unified">
                <div class="mb-3">
                    <input type="text" name="username" class="form-control form-control-sm rounded-3"
                           placeholder="NIS / NIP / Username" required autofocus>
                </div>

                <div class="mb-3">
                    <input type="password" name="password" class="form-control form-control-sm rounded-3"
                           placeholder="Password" required>
                </div>

                <div class="mb-4">
                    <select name="role" id="roleSelect" class="form-select form-control-sm rounded-3" required>
                        <option value="" disabled selected>Pilih role...</option>
                        <option value="admin">Administrator</option>
                        <option value="guru">Guru</option>
                        <option value="siswa">Siswa</option>
                    </select>
                </div>

                <button type="submit" id="loginBtn"
                        class="btn btn-primary btn-sm w-100 rounded-pill fw-bold shadow-sm"
                        style="height: 42px;">
                    Masuk
                </button>
            </form>
        </div>
    </div>
</div>

<!-- Ganti warna tombol sesuai role -->
<script>
document.getElementById('roleSelect').addEventListener('change', function() {
    const btn = document.getElementById('loginBtn');
    if (this.value === 'admin') {
        btn.className = 'btn btn-primary btn-sm w-100 rounded-pill fw-bold shadow-sm';
    } else if (this.value === 'guru') {
        btn.className = 'btn btn-success btn-sm w-100 rounded-pill fw-bold shadow-sm';
    } else if (this.value === 'siswa') {
        btn.className = 'btn btn-warning btn-sm w-100 rounded-pill fw-bold shadow-sm text-dark';
    }
});
</script>

{% endblock %}